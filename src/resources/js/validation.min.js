tribe.validation={},function(i,a,t){"use strict";var e=a(document);i.selectors={item:".tribe-validation",fields:"input, select, textarea",submit:'input[type="submit"], button',error:".tribe-validation-error",valid:".tribe-validation-valid",notice:".tribe-notice-validation",noticeAfter:".wp-header-end",noticeDismiss:".notice-dismiss"},i.conditions={isRequired:function(i){return""!=i},isGreaterThan:function(a,t,e){var r=i.parseConditon("isGreaterThan",a,t,e);return r.constraint<r.value},isGreaterOrEqualTo:function(a,t,e){var r=i.parseConditon("isGreaterOrEqualTo",a,t,e);return r.constraint<=r.value},isLessThan:function(a,t,e){var r=i.parseConditon("isLessThan",a,t,e);return r.constraint>r.value},isLessOrEqualTo:function(a,t,e){var r=i.parseConditon("isLessOrEqualTo",a,t,e);return r.constraint>=r.value},isEqualTo:function(a,t,e){var r=i.parseConditon("isEqualTo",a,t,e);return r.constraint==r.value},isNotEqualTo:function(a,t,e){var r=i.parseConditon("isNotEqualTo",a,t,e);return r.constraint!=r.value}},i.parseType={datepicker:function(i,a,e){var r=["yyyy-mm-dd","m/d/yyyy","mm/dd/yyyy","d/m/yyyy","dd/mm/yyyy","m-d-yyyy","mm-dd-yyyy","d-m-yyyy","dd-mm-yyyy"],n=0;a.length&&a.attr("data-datepicker_format")?n=a.attr("data-datepicker_format"):t.isString(r[a])&&(n=r[a]);var s=r[n];return i=moment(i,s).format("X")}},i.constraints={isRequired:function(i){var a=null;return a=i.data("required")||a,a=i.data("validationRequired")||a,a=i.data("validationIsRequired")||a,a=i.is("[required]")||a,a=i.is("[data-required]")||a,a=i.is("[data-validation-required]")||a,a=i.is("[data-validation-is-required]")||a},isGreaterThan:function(i){var a=null;return i.is("[data-validation-is-greater-than]")&&(a=i.data("validationIsGreaterThan")),a},isGreaterOrEqualTo:function(i){var a=null;return i.is("[data-validation-is-greater-or-equal-to]")&&(a=i.data("validationIsGreaterOrEqualTo")),a},isLessThan:function(i){var a=null;return i.is("[data-validation-is-less-than]")&&(a=i.data("validationIsLessThan")),a},isLessOrEqualTo:function(i){var a=null;return i.is("[data-validation-is-less-or-equal-to]")&&(a=i.data("validationIsLessOrEqualTo")),a},isEqualTo:function(i){var a=null;return i.is("[data-validation-is-equal-to]")&&(a=i.data("validationIsEqualTo")),a},isNotEqualTo:function(i){var a=null;return i.is("[data-validation-is-not-equal-to]")&&(a=i.data("validationIsNotEqualTo")),a}},i.parseConditon=function(e,r,n,s){var o=s.data("validationType"),l=null,d={value:r,constraint:n};if(!t.isNumber(n)){if(l=a(n),!l.length)return console.warning("Tribe Validation:","Invalid selector for",s,selector),d;n=l.val()}return o&&t.isFunction(i.parseType[o])&&(d.constraint=i.parseType[o](n,l,s),d.value=i.parseType[o](r,l,s)),d},i.fn=function(){return this.each(i.setup)},i.setup=function(t,r){var n=a(r);n.addClass(i.selectors.item.className()),n.on("submit.tribe",i.onSubmit),n.on("validation.tribe",i.onValidation),n.on("displayErrors.tribe",i.onDisplayErrors),e.on("click.tribe",i.selectors.submit,i.onClickSubmitButtons),e.on("click.tribe",i.selectors.noticeDismiss,i.onClickDismissNotice)},i.validate=function(t,e){var r=a(e),n=i.isValid(r);n||(r.addClass(i.selectors.error.className()),r.one("change",i.onChangeFieldRemoveError))},i.isValid=function(a){var e=i.getConstraints(a);if(!t.isObject(e))return e;var r=t.every(e);return r},i.getConstraints=function(a){var e=!0,r=a.val(),n=a.is(":disabled"),s=i.constraints;return n?e:(s=t.mapObject(s,function(i){return i(a)}),s=t.pick(s,function(i){return null!==i}),t.isEmpty(s)?e:s=t.mapObject(s,function(t,e){return i.conditions[e](r,t,a)}))},i.onValidation=function(t){var e=a(this),r=e.find(i.selectors.fields);r.each(i.validate);var n=e.find(i.selectors.error);return 0!==n.length?void e.trigger("displayErrors.tribe"):void e.addClass(i.selectors.valid.className())},i.onDisplayErrors=function(r){var n=a(this),s=n.find(i.selectors.error),o=a("<ul>"),l=a("<span>").addClass(i.selectors.noticeDismiss.className()),d=e.find(i.selectors.notice),u=a("<div>").addClass("notice notice-error is-dismissible tribe-notice").addClass(i.selectors.notice.className()).append(l);if(s.each(function(e,r){var n=a(r),s=n.data("validationError");if(t.isObject(s)){var l={},d=i.getConstraints(n,!1);t.each(s,function(i,a){l[tribe.utils.camelCase(a)]=i}),t.each(d,function(a,t){a||i.addErrorLine(l[t],n,o)})}else i.addErrorLine(s,n,o)}),u.append(o),0===d.length){var c=e.find(i.selectors.noticeAfter);c.after(u)}else d.replaceWith(u)},i.addErrorLine=function(i,t,e){var r=a("<li>").text(i);r.data("validationField",t),t.data("validationNoticeItem",t),e.append(r)},i.onSubmit=function(t){var e=a(this);e.trigger("validation.tribe");var r=e.is(i.selectors.valid);if(!r)return t.preventDefault(),!1},i.onClickSubmitButtons=function(t){var e=a(this),r=e.parents(i.selectors.item);if(0!==r.length){var n=r.find(i.selectors.fields);n.off("invalid.tribe"),n.one("invalid.tribe",i.onInvalidField)}},i.onInvalidField=function(t){var e=a(this),r=e.parents(i.selectors.item);return e.addClass(i.selectors.error.className()),r.trigger("displayErrors.tribe"),e.one("change",i.onChangeFieldRemoveError),t.preventDefault(),!1},i.onChangeFieldRemoveError=function(t){var e=a(this);e.hasClass(i.selectors.error.className())&&e.removeClass(i.selectors.error.className())},i.onClickDismissNotice=function(t){var e=a(this),r=e.parents(i.selectors.notice);r.remove()},i.onReady=function(t){a(i.selectors.item).validation()},a.fn.validation=i.fn,e.ready(i.onReady)}(tribe.validation,jQuery,_);
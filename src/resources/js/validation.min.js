tribe.validation={},function(a,e,i){"use strict";var t=e(document);a.selectors={item:".tribe-validation",fields:"input, select, textarea",submit:'input[type="submit"], button',error:".tribe-validation-error",valid:".tribe-validation-valid",notice:".tribe-notice-validation",noticeAfter:".wp-header-end",noticeDismiss:".notice-dismiss"},a.conditions={isRequired:function(a){return""!=a},isGreaterThan:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r<t},isGreaterOrEqualTo:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r<=t},isLessThan:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r>t},isLessOrEqualTo:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r>=t},isEqualTo:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r==t},isNotEqualTo:function(t,r,n){var s=n.data("validationType"),o=null;return i.isNumber(r)||(o=e(r),r=o.val()),s&&i.isFunction(a.parseType[s])&&(r=a.parseType[s](r,o,n),t=a.parseType[s](t,o,n)),r!=t}},a.parseType={datepicker:function(a,e,t){var r=["yyyy-mm-dd","m/d/yyyy","mm/dd/yyyy","d/m/yyyy","dd/mm/yyyy","m-d-yyyy","mm-dd-yyyy","d-m-yyyy","dd-mm-yyyy"],n=0;e.length&&e.attr("data-datepicker_format")?n=e.attr("data-datepicker_format"):i.isString(r[e])&&(n=r[e]);var s=r[n];return a=moment(a,s).format("X")}},a.constraints={isRequired:function(a){var e=null;return e=a.data("required")||e,e=a.data("validationRequired")||e,e=a.data("validationIsRequired")||e,e=a.is("[required]")||e,e=a.is("[data-required]")||e,e=a.is("[data-validation-required]")||e,e=a.is("[data-validation-is-required]")||e},isGreaterThan:function(a){var e=null;return a.is("[data-validation-is-greater-than]")&&(e=a.data("validationIsGreaterThan")),e},isGreaterOrEqualTo:function(a){var e=null;return a.is("[data-validation-is-greater-or-equal-to]")&&(e=a.data("validationIsGreaterOrEqualTo")),e},isLessThan:function(a){var e=null;return a.is("[data-validation-is-less-than]")&&(e=a.data("validationIsLessThan")),e},isLessOrEqualTo:function(a){var e=null;return a.is("[data-validation-is-less-or-equal-to]")&&(e=a.data("validationIsLessOrEqualTo")),e},isEqualTo:function(a){var e=null;return a.is("[data-validation-is-equal-to]")&&(e=a.data("validationIsEqualTo")),e},isNotEqualTo:function(a){var e=null;return a.is("[data-validation-is-not-equal-to]")&&(e=a.data("validationIsNotEqualTo")),e}},a.fn=function(){return this.each(a.setup)},a.setup=function(i,r){var n=e(r);n.addClass(a.selectors.item.className()),n.on("submit.tribe",a.onSubmit),n.on("validation.tribe",a.onValidation),n.on("displayErrors.tribe",a.onDisplayErrors),t.on("click.tribe",a.selectors.submit,a.onClickSubmitButtons),t.on("click.tribe",a.selectors.noticeDismiss,a.onClickDismissNotice)},a.validate=function(i,t){var r=e(t),n=a.isValid(r);n||(r.addClass(a.selectors.error.className()),r.one("change",a.onChangeFieldRemoveError))},a.isValid=function(e){var t=a.getConstraints(e);if(!i.isObject(t))return t;var r=i.every(t);return r},a.getConstraints=function(e){var t=!0,r=e.val(),n=e.is(":disabled"),s=a.constraints;return n?t:(s=i.mapObject(s,function(a){return a(e)}),s=i.pick(s,function(a){return null!==a}),i.isEmpty(s)?t:s=i.mapObject(s,function(i,t){return a.conditions[t](r,i,e)}))},a.onValidation=function(i){var t=e(this),r=t.find(a.selectors.fields);r.each(a.validate);var n=t.find(a.selectors.error);return 0!==n.length?void t.trigger("displayErrors.tribe"):void t.addClass(a.selectors.valid.className())},a.onDisplayErrors=function(r){var n=e(this),s=n.find(a.selectors.error),o=e("<ul>"),l=e("<span>").addClass(a.selectors.noticeDismiss.className()),d=t.find(a.selectors.notice),u=e("<div>").addClass("notice notice-error is-dismissible tribe-notice").addClass(a.selectors.notice.className()).append(l);if(s.each(function(t,r){var n=e(r),s=n.data("validationError");if(i.isObject(s)){var l={},d=a.getConstraints(n,!1);i.each(s,function(a,e){l[tribe.utils.camelCase(e)]=a}),i.each(d,function(e,i){e||a.addErrorLine(l[i],n,o)})}else a.addErrorLine(s,n,o)}),u.append(o),0===d.length){var c=t.find(a.selectors.noticeAfter);c.after(u)}else d.replaceWith(u)},a.addErrorLine=function(a,i,t){var r=e("<li>").text(a);r.data("validationField",i),i.data("validationNoticeItem",i),t.append(r)},a.onSubmit=function(i){var t=e(this);t.trigger("validation.tribe");var r=t.is(a.selectors.valid);if(!r)return i.preventDefault(),!1},a.onClickSubmitButtons=function(i){var t=e(this),r=t.parents(a.selectors.item);if(0!==r.length){var n=r.find(a.selectors.fields);n.off("invalid.tribe"),n.one("invalid.tribe",a.onInvalidField)}},a.onInvalidField=function(i){var t=e(this),r=t.parents(a.selectors.item);return t.addClass(a.selectors.error.className()),r.trigger("displayErrors.tribe"),t.one("change",a.onChangeFieldRemoveError),i.preventDefault(),!1},a.onChangeFieldRemoveError=function(i){var t=e(this);t.hasClass(a.selectors.error.className())&&t.removeClass(a.selectors.error.className())},a.onClickDismissNotice=function(i){var t=e(this),r=t.parents(a.selectors.notice);r.remove()},a.onReady=function(i){e(a.selectors.item).validation()},e.fn.validation=a.fn,t.ready(a.onReady)}(tribe.validation,jQuery,_);